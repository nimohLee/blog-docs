## 테스트 주도 개발의 목표

테스트 주도 개발(이하 TDD)의 궁극적인 목표는 <span style="font-size: 20px; color: tomato;">작동하는 깔끔한 코드(clean code that works)</span> 이다. TDD는 예측 가능한 개발 방법이기 때문에 끊임없이 발생할 버그에 대해 걱정하지 않아도 된다. 나 역시 이 부분이 TDD가 필요한 가장 큰 이유라고 생각한다.

## TDD 규칙
저자에 따르면 TDD는 다음 두 가지의 단순한 규칙을 따른다고 한다.

- 오직 자동화된 테스트가 실패할 경우에만 새로운 코드를 작성한다.
- 중복을 제거한다.

중복을 제거하는 것은 직관적이기 때문에 쉽게 이해가 된다. `오직 자동화된 테스트가 실패할 경우에만 새로운 코드를 작성한다.` 라는 문장은 조금 이해하기 어렵다.

TDD는 실패하는 테스트 -> 일단 성공 -> 리팩터링 인데, "일단 성공"와 "실패할 경우" 가 매칭이 되는 것인 지는 모르겠다.
내가 아직 자동화된 테스트라는 것을 정확하게 이해하지 못 한 듯 하다.

### 프로그래밍 순서
1. 빨강 - 실패하는 작은 테스트를 작성한다. 이 때에는 컴파일조차 안 될 수 있다.
2. 초록 - 빨리 테스트가 성공하도록 만든다. 일단 성공해야하기 떄문에 어떤 죄악을 저질러도 된다. 여기서 죄악이란 상수를 반환해주는 등 오로지 성공을 위한 코드를 작성하는 것을 말한다.
3. 리팩토링 - 2번 과정에서 발생한 중복을 제거한다.


## 이 책을 끝까지 읽고 나면
- 단순하게 시작하고
- 자동화된 테스트를 만들고
- 새로운 설계 결정을 <span style="color: skyblue; font-size:18px;">한 번에 하나씩</span> 도입하기 위해 리팩터링을 할 준비가 될 것이다.

## 1장
저자는 Money 예제를 본격적으로 시작하기 전에 기능 목록을 먼저 정의한다. 개인적으로 TDD에서 매우 중요한 부분이라고 생각한다. 
기능 목록을 정의함으로써 해야할 일을 알려주고, 지금 내가 무엇을 해야하는 지 등을 알 수 있다.

> 테스트를 작성할 때에는 오퍼레이션(메서드, 함수 등)의 완벽한 인터페이스에 대해 상상해보는 것이 좋다. 그리고 <span style="color: skyblue; font-weight: bold;">외부에서 어떤 식으로 보일 지에 대한 이야기를 테스트 코드에 적는 것이다.</span>

이 부분을 통해 좋은 TDD가 좋은 OOP를 만들 수 있다고 다시 한번 생각했다. OOP 역시 객체 인터페이스 간의 **이야기(협력)** 이 매우 중요하기 때문이다.

### 저자의 강조점
저자는 TDD의 1장에서 작은 단계의 중요성을 강조하고, 핵심은 작은 단계 그 자체가 아니라 작은 단계를 밟을 능력이라고 한다.
큰 문제를 작은 문제로 나누고, 작은 문제부터 시작하면서 두려움을 낮출 수 있어야 한다. 작은 단계로 작업하는 방법을 배우면, 점진적으로 큰 단계를 작업할 수 있을 것이다. 하지만 그 반대의 경우는 어렵다고 한다.

## 2장
나는 개발하다 보면 그냥 이것만 고치면 되겠네~ 이것쯤이야 하고 슉슉 고쳐버린다. TDD 할 때도 마찬가지다. 1장에서 읽은 바로는 할 일이 생기면 할 일 목록에 적고 일단 넘어가라고 했다. 나는 걱정했다. 알면서 어떻게 넘어가지...? 

다행히 2장에서 저자는 내가 뭘 입력해야 할 지 명백히 아는 경우는 그냥 구현하라고 한다. TDD가 꽤 유연한 방법론이라고 생각했다.

## 3장
3장에서는 도입부에서 Dollar 객체가 값 객체인 것을 언급한다. 값 객체는 불변이어야 한다. 즉, 값 객체를 생성자로 생성하고 나면 `setter` 등으로 수정할 수 없어야 한다. 자바에서는 대표적으로 `String`이 불변 객체이다.

하나 감명깊었던 것은 `Dollar`의 `amount`를 `private`으로 변경한 타이밍이다. 나였다면 `Dollar` 객체에 `getter()`를 만들었을 것이다. 저자는 동등 비교 메서드(`equals`, `hashCode`)들을 재정의 해주고, `amount`를 사용하는 곳이 본인 객체임을 확인한 후 `amount`를 `private`으로 닫아주면서 완벽하게 캡슐화시켰다.

기막힌 타이밍이었다.

## 5장
5장은 중복제거에 대한 중요성을 강조하는 짧은 장이다.
